'use strict';

/**
 * Converts an image's content to Data URI scheme.
 *
 * @param {String} url The path of the image to be converted.
 * @returns {Object} A promise that when resolved, returns the Base64 string.
 * @example
 *
 * convertImageToBase64('images/index.png').then(function (string64) {
 *   return string64;
 * });
 * // => data:image/png;base64,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
 */
const convertImageToBase64 = url => {
  const canvas = document.createElement('canvas');
  const ctx = canvas.getContext('2d');
  const image = new Image();

  image.src = url;

  return new Promise((resolve, reject) => {
    image.onload = resolve;
    image.onerror = reject;
  }).then(() => {
    canvas.width = image.width;
    canvas.height = image.height;
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.drawImage(image, 0, 0);
    return canvas.toDataURL();
  });
};

module.exports = convertImageToBase64;
